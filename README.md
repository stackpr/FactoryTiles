Scope
=====

FactoryTiles aims to be a complete but minimal graphicsset for RoboRally®.
Complete means that all possible situations can be displayed with these graphics.
Minimal means that there are no graphics not needed to display the original game.

If you want RoboRally®, include FactoryTiles. If you want zombies, fork FactoryTiles.
This also means, your graphics engine needs to support semi-transparency per-pixel and rotation.

Paradigms
=========

* The viewpoint is exactly from above.
* The viewpoint has a finite distance.
* The default motion direction is north to south.
* The default rotation direction is clockwise, starting north.
* All graphics are the full tile size.
* Outlines are 1px wide at 64 px tile size.
* Notation is x (east to west) first, then y (north to south).

Notes on Building
=================

The default rendersize is 64 x 64 pixels per tile and current renderings are part ot the distribution.
Other resolutions can be generated by appending them to the make command, if you need other sizes for debugging or production.
For example, use following to generate images for 32x32, 64x64 and 128x128 tilessize.
    $ make .32 .64 .128

Dependencies
------------

* `make` - dependency-driven creation
* `GNU` - basic folder and file operations
* `Inkscape` - renders the SVGs into PNGs
* `markdown` - renders README.md into README.html (optional)

The Tile Model
==============

Each tile on the playing field has one floor, eventually some properties and up to two robots on it.


Floors - Whatever needs to be rendered first
--------------------------------------------

* abyss - infinitely deep nothing or the brink to it
* concrete - just plain floor
* conveyorBelt - conveyor belts
* expressBelt - express belts
* repair - repairzone
* turntable - turns robots

Properties - Stuff associated with a tile
-----------------------------------------

* checkpoint - marks the route
* laser - damages robots occassionally (rotate as needed)
* laserEmitter - emits laser (ternary naming is for a reason)
* crusher - destructs robots occassionally (embedded into walls)
* pusher - moves robots occassionally
* wall - keeps robots from crossing it (binary naming is for a reason)

Robots - The Counters of RoboRally
----------------------------------

* The eight original robots
* custom robots

Order of Rendering
==================

The order of rendering from background do foreground is as follows:
floor, laser beam, wall, laser, pusher, robot, checkpoint, crusher

Status
======

<table>
    <thead>
        <tr>
            <td>Component</td> <td>Status</td> <td>Size</td> <td>Comment</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>recursive make framework</td> <td>done</td> <td></td>
        </tr>
        <tr>
            <td>iterative make framework</td> <td>done</td> <td></td>
        </tr>
        <tr>
            <td>robot/Hammer_Bot</td> <td>done</td> <td>1 graphic</td>
        </tr>
        <tr>
            <td>robot/Hulk_X-90</td> <td>done</td> <td>1 graphic</td>
        </tr>
        <tr>
            <td>robot/Spin_Bot</td> <td>done</td> <td>1 graphic</td>
        </tr>
        <tr>
            <td>robot/Squash_Bot</td> <td>done</td> <td>1 graphic</td>
        </tr>
        <tr>
            <td>robot/Trundle_Bot</td> <td>done</td> <td>1 graphic</td>
        </tr>
        <tr>
            <td>robot/Twitch</td> <td>done</td> <td>1 graphic</td>
        </tr>
        <tr>
            <td>robot/Twonky</td> <td>done</td> <td>1 graphic</td>
        </tr>
        <tr>
            <td>robot/Zoom_Bot</td> <td>done</td> <td>1 graphic</td>
        </tr>
        <tr>
            <td>floor/abyss</td> <td>done</td> <td>47 graphics</td>
        </tr>
        <tr>
            <td>floor/concrete</td> <td>done</td> <td>12 graphics</td>
        </tr>
        <tr>
            <td>floor/conveyorBelt</td> <td>done</td> <td>28 graphics</td>
        </tr>
        <tr>
            <td>floor/expressBelt</td> <td>done</td> <td>28 graphics</td>
        </tr>
        <tr>
            <td>floor/repair</td> <td><b>todo</b></td> <td>2 graphics</td>
        </tr>
        <tr>
            <td>floor/turntable</td> <td><b>todo</b></td> <td>2 graphics</td>
        </tr>
        <tr>
            <td>module/original</td> <td>done</td> <td>85 graphics</td>
        </tr>
        <tr>
            <td>property/checkpoint</td> <td>done</td> <td>6 graphics</td>
        </tr>
        <tr>
            <td>property/laser</td> <td>done</td> <td>76 graphics</td>
        </tr>
        <tr>
            <td>property/laserBeam</td> <td>done</td> <td>15 graphics</td>
        </tr>
        <tr>
            <td>property/crusher</td> <td>done</td> <td>3 graphics</td>
        </tr>
        <tr>
            <td>property/pusher</td> <td><b>todo</b></td> <td>5 graphics</td>
        </tr>
        <tr>
            <td>property/wall</td> <td>done</td> <td>15 graphics</td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td>overall</td> <td>97 %</td> <td>323/332 graphics</td>
        </tr>
    <tfoot>
</table>

Approximate amount of time needed to build: 2 minutes / 2,5 GHz

Complexity
----------

Each tile consists of 1 of the 16 abyss not combinable with anything (4 orientations, 64 variants)

or 1 of the 5 abyss, which are combinable with walls as follows:

* bay - 0000, 0010, 0100, 0110, 1000, 1010, 1100, 1110 (4 orientations, 32 variants)
* edge - 0000, 0100 (4 orientations, 8 variants)
* nook - 0000, 0100, 1000, 1100 (4 orientations, 16 variants)
* single - 0000, 0001, 0010, 0011, 0100, 0101, 0110, 0111, 1000, 1001, 1010, 1011, 1100, 1101, 1110, 1111 (16 variants)
* turn - 0000, 0100, 1000, 1100 (4 orientations, 16 variants)

or (

1 of the following floors

* concrete (1 variant)
* conveyorBelt (7 types, 4 orientations, 28 variants)
* expressBelt (7 types, 4 orientations, 28 variants)
* repair (2 types, 4 orientations, 8 variants)
* turntable (2 types, 4 orientations, 8 variants)

and anything of the following

* 0 to 1 checkpoint (6 types, 7 variants),
* 0 to 1 laser (15 types, 16 variants),
* 0 to 2 laserEmitters (non-opposing, 76 variants),
* 0 to 1 crusher (2 variants),
* 0 to 2 pushers (non-opposing, 8 variants) and
* 0 to 1 of the 15 walls (16 variants)

).

This gives us 64 + (32 + 8 + 16 + 16 + 16) + (1 + 28 + 28 + 8 + 8) * 7 * 16 * 76 * 2 * 8 * 16 = 159.072.408 variants per tile.

Naming/Notation
---------------

To draw the board you don't necessesarily need to understand the game's logic.
So you can just get 7 two dimensional arrays containing links to the corresponding graphics as follows:


<table>
    <thead>
        <tr>
            <td>Layer</td> <td>Type</td> <td>Tile</td> <td>Meaning</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>0</td>
            <td>floor/abyss</td>
            <td>[00000000 &hellip; 11111111]</td>
            <td>even bits &rarr; vertices, odd bits &rarr; edges</td>
        </tr>
        <tr>
            <td>0</td>
            <td>floor/concrete</td>
            <td>[0 &hellip; 12]</td>
            <td>enumerated</td>
        </tr>
        <tr>
            <td>0</td>
            <td>floor/conveyorBelt</td>
            <td>[0000 &hellip; 1111][0000 &hellip; 1000]</td>
            <td>first 4 bits &rarr; origin (1-3hot), second 4 bits &rarr; destination (1hot)</td>
        </tr>
        <tr>
            <td>0</td>
            <td>floor/expressBelt</td>
            <td>[0000 &hellip; 1111][0000 &hellip; 1000]</td>
            <td>first 4 bits &rarr; origin (1-3hot), second 4 bits &rarr; destination (1hot)</td>
        </tr>
        <tr>
            <td>0</td>
            <td>floor/repair</td>
            <td>[1 &hellip; 2]</td>
            <td>1 &rarr; repairs 1 health point, 2 &rarr; repairs 2 health points</td>
        </tr>
        <tr>
            <td>0</td>
            <td>floor/turntable</td>
            <td>[0 &hellip; 1]</td>
            <td>0 &rarr; clockwise, 1 &rarr; counter-cockwise</td>
        </tr>

        <tr>
            <td>1</td>
            <td>property/laserBeam</td>
            <td>[0 &hellip; 3][0 &hellip; 3]</td>
            <td>first digit &rarr; count north to south, second digit &rarr; count east to west</td>
        </tr>
        <tr>
            <td>2</td>
            <td>property/wall</td>
            <td>[0000 &hellip; 1111]</td>
            <td>each digit marks whether there is a wall</td>
        </tr>
        <tr>
            <td>3</td>
            <td>property/pusher</td>
            <td>[1, 2, 3, 24, 135]</td>
            <td>each digit marks a phase in that the pusher is active</td>
        </tr>
        <tr>
            <td>4</td>
            <td>property/laser</td>
            <td>[0000 &hellip; 3300]</td>
            <td>each digit &rarr; laser count on wall</td>
        </tr>
        <tr>
            <td>5</td>
            <td>robot/Hammer_Bot</td>
            <td>0</td>
            <td>Each robot has its own folder.</td>
        </tr>
        <tr>
            <td>5</td>
            <td>robot/Hulk_X-90</td>
            <td>0</td>
            <td>Each robot has its own folder.</td>
        </tr>
        <tr>
            <td>5</td>
            <td>robot/Spin_Bot</td>
            <td>0</td>
            <td>Each robot has its own folder.</td>
        </tr>
        <tr>
            <td>5</td>
            <td>robot/Squash_Bot</td>
            <td>0</td>
            <td>Each robot has its own folder.</td>
        </tr>
        <tr>
            <td>5</td>
            <td>robot/Trundle_Bot</td>
            <td>0</td>
            <td>Each robot has its own folder.</td>
        </tr>
        <tr>
            <td>5</td>
            <td>robot/Twitch</td>
            <td>0</td>
            <td>Each robot has its own folder.</td>
        </tr>
        <tr>
            <td>5</td>
            <td>robot/Twonky</td>
            <td>0</td>
            <td>Each robot has its own folder.</td>
        </tr>
        <tr>
            <td>5</td>
            <td>robot/Zoom_Bot</td>
            <td>0</td>
            <td>Each robot has its own folder.</td>
        </tr>
        <tr>
            <td>6</td>
            <td>property/checkpoint</td>
            <td>[0 &hellip; 6]</td>
            <td>enumerated</td>
        </tr>
        <tr>
            <td>7</td>
            <td>property/crusher</td>
            <td>[3, 15, 24]</td>
            <td>each digit marks a phase in that the crusher is active</td>
        </tr>
    </tbody>
</table>
URLs form as follows:
    <FactoryTilesBase> + "/" + <Type> + "/" + <Resolution> + "/" + <Tile> + ".png"

##Encoding
The most trivial method for internal encoding would be to omit FactoryTile's base, the floor- or property-prefix and the trailing ".png".
The longest String would be 'conveyorBelt/64/1000000001', adding up to 22 characters per layer, 176 characters per tile, 25344 characters or 50688 Bytes per map.
That's the very worst case. Expect to have mostly empty layers per field.
